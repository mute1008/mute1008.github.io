+++
title = "セキュアなソフトウェア開発とは何かをNIST SSDF v1.1から読み解く"
date = "2022-10-14"
tags = [
    "security",
]
+++

#### NIST SSDF v1.1の概要
この文書は、以下の4つのグループから構成されています。
- Prepare the Organization (組織を準備する)
- Protect the Software (ソフトウェアを守る)
- Produce Well-Secured Software (セキュアなソフトウェアを作る)
- Respond to Vulnerabilities (脆弱性に対処する)

これらのグループには、いくつかのプラクティスが含まれます。
プラクティスには、タスク、想定される実施例、参考文献が含まれます。

この記事では、プラクティスに焦点を当て、プラクティスを実践するためのツールやフレームワークについて記述します。
プラクティスの翻訳や解釈には独自の考えを含むので、組織や状況によって上手く変更して適用してください。
断りがない場合、基本的にはWebアプリケーション開発を想定して記述します。

#### Prepare the Organization (PO)
```
PO.1: ソフトウェア開発のためのセキュリティ要件を定義する
PO.2: 役割と責任を導入する
PO.3: サポートツールチェーンを導入する
PO.4: ソフトウェアのセキュリティチェックのための基準を定義し使用する
PO.5: ソフトウェア開発のための安全な環境を実装し維持する
```

この章では、セキュアな開発に取り組む上で必要となる事柄について記述されています。

PO.1でセキュリティ要件を定義すると記述されていますが、一から要件を作って行くのは大変です。
組織で作っているものがWebアプリケーションである場合は、OWASP ASVSなどが使えそうです。
OWASP ASVSは一般的なWebアプリケーションに利用する想定なので、組織固有の要件を洗い出すには脅威モデリングなどが活用できそうです。

PO.2は、セキュリティチャンピオンの指名や教育というアクションが適当そうです。
セキュリティチャンピオンについては、以下のような資料が参考になります。

- [OWASP Security Culture](https://owasp.org/www-project-security-culture/v10/4-Security_Champions/)
- [メルカリで「セキュリティチャンピオン」育成プログラムが開始！その内容と“発足した理由”を紹介](https://mercan.mercari.com/articles/19140/)

PO.3は、DAST / SAST / SCAや、その他ツール類の導入が適当そうです。
このあたりのツールは無数にあるので、開発の邪魔にならない範囲で順番に対処していくのが良さそうです。

PO.4、PO.5は組織やアプリケーションによって異なります。

#### Protect the Software (PS)
```
PS.1: コードを不正アクセスや改ざんから守る
PS.2: リリースの完全性を検証する仕組みの提供
PS.3: ソフトウェアリリースごとにアーカイブし保護する
```

この章では、ソフトウェアのすべてのコンポーネントを改ざんや不正アクセスから保護しようと言う事が記述されています。

この章に書いてあることを実践するのは、作っているアプリケーションの種類によってやるべきことは違ってきそうです。

一例として、kubernetesを使っている状況を考えてみます。
kubernetesの場合では、署名したコンテナのみをデプロイできるように設定するなどがこれにあたりそうです。

- [sigstore/cosign](https://github.com/sigstore/cosign)
- [署名検証でKubernetesのデプロイメントをセキュアにする方法](https://sysdig.jp/blog/secure-kubernetes-deployment-signature-verification/)

#### Produce Well-Secured Software (PW)
```
PW.1: セキュリティ要件を満たすソフトウェアの設計
PW.2: セキュリティ要件を満たすようレビューを行う
PW.3: -
PW.4: 機能の再実装を避け、安全性の高い既存ソフトウェアを利用する
PW.5: セキュアコーディングの実践
PW.6: コンパイル、インタプリタ、ビルドプロセスの設定による実行ファイルのセキュリティ向上
PW.7: 人間が読むことのできるコードのレビューや分析を行う
PW.8: 実行可能なコードをテストして脆弱性を特定する
PW.9: ソフトウェアがデフォルトでセキュアな設定になるようにする
```

この章では、セキュアなソフトウェア開発をするための方法について記述してあります。

PW.1からPW.6の内容は、特定のツールやフレームワークを使うことで解決できるものではなく、開発者自身が実践していくべき内容が多いように見受けられます。

PW.7 / PW.8はSAST / DASTを使うことで解決できそうですが、PO.3と重複していそうです。

PW.9は状況やコンテキストによって変わってきますが、IaaSを使うということを一例に考えてみます。
IaaSへのデプロイにterraformを使っている場合、[aquasecurity/tfsec](https://github.com/aquasecurity/tfsec)などを利用することができそうです。
terraformを使っていない場合でも、CSPMなどが利用できるかもしれません。

#### Respond to Vulnerabilities (RV)
```
RV.1: 継続的な脆弱性の特定と確認
RV.2: 脆弱性の評価、優先順位付け、および修正
RV.3: 脆弱性を分析し、その根本的な原因を特定する
```

この章では、脆弱性の対処について記述してあります。

大きな組織にはたくさんのサービスがあり、複数のサービスやスキャナから脆弱性の情報が上がってくる状況になっていると思います。
そのような環境では、以下のような脆弱性管理基盤みたいなものがあると、マネジメントが非常に楽になりそうです。

[Sisyphus and the CVE Feed: Vulnerability Management at Scale](https://medium.com/airbnb-engineering/sisyphus-and-the-cve-feed-vulnerability-management-at-scale-e2749f86a7a4)